<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Optimize the crop rotation plan for soil quality improvement — bln_field_optimiser • BLN</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Optimize the crop rotation plan for soil quality improvement — bln_field_optimiser"><meta name="description" content="This function estimates what crop rotation plan is mosts suited for the current soil quality and the associated contribution to ecysystem services"><meta property="og:description" content="This function estimates what crop rotation plan is mosts suited for the current soil quality and the associated contribution to ecysystem services"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BLN</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.8.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/bln_column_description.html">Description of the input and output for BLN</a></li>
    <li><a class="dropdown-item" href="../articles/bln_ess_crop_production.html">BLN assessment for crop production</a></li>
    <li><a class="dropdown-item" href="../articles/bln_intro.html">BLN introduction</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/AgroCares/BLN/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Optimize the crop rotation plan for soil quality improvement</h1>
      <small class="dont-index">Source: <a href="https://github.com/AgroCares/BLN/blob/main/R/bln_field_optimiser.R" class="external-link"><code>R/bln_field_optimiser.R</code></a></small>
      <div class="d-none name"><code>bln_field_optimiser.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function estimates what crop rotation plan is mosts suited for the current soil quality and the associated contribution to ecysystem services</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">bln_field_optimiser</span><span class="op">(</span></span>
<span>  <span class="va">ID</span>,</span>
<span>  <span class="va">B_LU_BRP</span>,</span>
<span>  <span class="va">B_SC_WENR</span>,</span>
<span>  <span class="va">B_GWL_CLASS</span>,</span>
<span>  <span class="va">B_SOILTYPE_AGR</span>,</span>
<span>  <span class="va">B_HELP_WENR</span>,</span>
<span>  <span class="va">B_AER_CBS</span>,</span>
<span>  <span class="va">B_GWL_GLG</span>,</span>
<span>  <span class="va">B_GWL_GHG</span>,</span>
<span>  <span class="va">B_GWL_ZCRIT</span>,</span>
<span>  <span class="va">B_DRAIN</span>,</span>
<span>  <span class="va">B_FERT_NORM_FR</span>,</span>
<span>  <span class="va">B_SLOPE_DEGREE</span>,</span>
<span>  <span class="va">B_GWP</span>,</span>
<span>  <span class="va">B_AREA_DROUGHT</span>,</span>
<span>  <span class="va">B_CT_PSW</span>,</span>
<span>  <span class="va">B_CT_NSW</span>,</span>
<span>  <span class="va">B_SOMERS_BC</span>,</span>
<span>  <span class="va">B_DRAIN_SP</span>,</span>
<span>  <span class="va">B_DRAIN_WP</span>,</span>
<span>  <span class="va">A_SOM_LOI</span>,</span>
<span>  <span class="va">A_CLAY_MI</span>,</span>
<span>  <span class="va">A_SAND_MI</span>,</span>
<span>  <span class="va">A_SILT_MI</span>,</span>
<span>  <span class="va">A_FE_OX</span>,</span>
<span>  <span class="va">A_AL_OX</span>,</span>
<span>  <span class="va">A_PH_CC</span>,</span>
<span>  <span class="va">A_N_RT</span>,</span>
<span>  <span class="va">A_CN_FR</span>,</span>
<span>  <span class="va">A_S_RT</span>,</span>
<span>  <span class="va">A_N_PMN</span>,</span>
<span>  <span class="va">A_P_AL</span>,</span>
<span>  <span class="va">A_P_CC</span>,</span>
<span>  <span class="va">A_P_WA</span>,</span>
<span>  <span class="va">A_P_SG</span>,</span>
<span>  <span class="va">A_CEC_CO</span>,</span>
<span>  <span class="va">A_CA_CO_PO</span>,</span>
<span>  <span class="va">A_MG_CO_PO</span>,</span>
<span>  <span class="va">A_K_CO_PO</span>,</span>
<span>  <span class="va">A_K_CC</span>,</span>
<span>  <span class="va">A_MG_CC</span>,</span>
<span>  <span class="va">A_MN_CC</span>,</span>
<span>  <span class="va">A_ZN_CC</span>,</span>
<span>  <span class="va">A_CU_CC</span>,</span>
<span>  <span class="va">D_SA_W</span>,</span>
<span>  <span class="va">D_RO_R</span>,</span>
<span>  <span class="va">M_COMPOST</span>,</span>
<span>  <span class="va">M_GREEN</span>,</span>
<span>  A_DENSITY_SA <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  B_LSW_ID <span class="op">=</span> <span class="cn">NA_character_</span>,</span>
<span>  LSW <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  i_clim_rothc <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  A_SOM_LOI_MLMAX <span class="op">=</span> <span class="cn">NA_real_</span>,</span>
<span>  foptim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>scenarios <span class="op">=</span> <span class="cn">NULL</span>, b_lu_brp <span class="op">=</span> <span class="cn">NULL</span>, outputtype <span class="op">=</span> <span class="st">"rotation"</span>, mc <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    runrothc <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-id">ID<a class="anchor" aria-label="anchor" href="#arg-id"></a></dt>
<dd><p>(character) A fieldid</p></dd>


<dt id="arg-b-lu-brp">B_LU_BRP<a class="anchor" aria-label="anchor" href="#arg-b-lu-brp"></a></dt>
<dd><p>(numeric) a series with crop codes given the crop rotation plan (source: the BRP)</p></dd>


<dt id="arg-b-sc-wenr">B_SC_WENR<a class="anchor" aria-label="anchor" href="#arg-b-sc-wenr"></a></dt>
<dd><p>(character) The risk for subsoil compaction as derived from risk assessment study of Van den Akker (2006).</p></dd>


<dt id="arg-b-gwl-class">B_GWL_CLASS<a class="anchor" aria-label="anchor" href="#arg-b-gwl-class"></a></dt>
<dd><p>(character) The groundwater table class</p></dd>


<dt id="arg-b-soiltype-agr">B_SOILTYPE_AGR<a class="anchor" aria-label="anchor" href="#arg-b-soiltype-agr"></a></dt>
<dd><p>(character) The agricultural type of soil</p></dd>


<dt id="arg-b-help-wenr">B_HELP_WENR<a class="anchor" aria-label="anchor" href="#arg-b-help-wenr"></a></dt>
<dd><p>(character) The soil type abbreviation, derived from 1:50.000 soil map</p></dd>


<dt id="arg-b-aer-cbs">B_AER_CBS<a class="anchor" aria-label="anchor" href="#arg-b-aer-cbs"></a></dt>
<dd><p>(character) The agricultural economic region in the Netherlands (CBS, 2016)</p></dd>


<dt id="arg-b-gwl-glg">B_GWL_GLG<a class="anchor" aria-label="anchor" href="#arg-b-gwl-glg"></a></dt>
<dd><p>(numeric) The lowest groundwater level averaged over the most dry periods in 8 years in cm below ground level</p></dd>


<dt id="arg-b-gwl-ghg">B_GWL_GHG<a class="anchor" aria-label="anchor" href="#arg-b-gwl-ghg"></a></dt>
<dd><p>(numeric) The highest groundwater level averaged over the most wet periods in 8 years in cm below ground level</p></dd>


<dt id="arg-b-gwl-zcrit">B_GWL_ZCRIT<a class="anchor" aria-label="anchor" href="#arg-b-gwl-zcrit"></a></dt>
<dd><p>(numeric) The distance between ground level and groundwater level at which the groundwater can supply the soil surface with 2mm water per day (in cm)</p></dd>


<dt id="arg-b-drain">B_DRAIN<a class="anchor" aria-label="anchor" href="#arg-b-drain"></a></dt>
<dd><p>(boolean) Are drains installed to drain the field (options: yes or no)</p></dd>


<dt id="arg-b-fert-norm-fr">B_FERT_NORM_FR<a class="anchor" aria-label="anchor" href="#arg-b-fert-norm-fr"></a></dt>
<dd><p>(numeric) The fraction of the application norm utilized</p></dd>


<dt id="arg-b-slope-degree">B_SLOPE_DEGREE<a class="anchor" aria-label="anchor" href="#arg-b-slope-degree"></a></dt>
<dd><p>(numeric) The slope of the field (degrees)</p></dd>


<dt id="arg-b-gwp">B_GWP<a class="anchor" aria-label="anchor" href="#arg-b-gwp"></a></dt>
<dd><p>(boolean) is the field located in a groundwater protected area (options: TRUE or FALSE)</p></dd>


<dt id="arg-b-area-drought">B_AREA_DROUGHT<a class="anchor" aria-label="anchor" href="#arg-b-area-drought"></a></dt>
<dd><p>(boolean) is the field located in an area with high risks for water deficiencies (options: TRUE or FALSE)</p></dd>


<dt id="arg-b-ct-psw">B_CT_PSW<a class="anchor" aria-label="anchor" href="#arg-b-ct-psw"></a></dt>
<dd><p>(numeric) the critical target for required reduction in P loss from agriculture (kg P / ha) to reach targets of KRW</p></dd>


<dt id="arg-b-ct-nsw">B_CT_NSW<a class="anchor" aria-label="anchor" href="#arg-b-ct-nsw"></a></dt>
<dd><p>(numeric) the critical target for required reduction in N loss from agriculture (kg N / ha) to reach targets of KRW</p></dd>


<dt id="arg-b-somers-bc">B_SOMERS_BC<a class="anchor" aria-label="anchor" href="#arg-b-somers-bc"></a></dt>
<dd><p>(integer) The base combination of SOMERS peat soil classification (varies between 1 and 290)</p></dd>


<dt id="arg-b-drain-sp">B_DRAIN_SP<a class="anchor" aria-label="anchor" href="#arg-b-drain-sp"></a></dt>
<dd><p>(numeric) the drooglegging of a field in summer (difference field height and ditch level, in meters)</p></dd>


<dt id="arg-b-drain-wp">B_DRAIN_WP<a class="anchor" aria-label="anchor" href="#arg-b-drain-wp"></a></dt>
<dd><p>(numeric) the drooglegging of a field in winter (difference field height and ditch level, in meters)</p></dd>


<dt id="arg-a-som-loi">A_SOM_LOI<a class="anchor" aria-label="anchor" href="#arg-a-som-loi"></a></dt>
<dd><p>(numeric) The percentage organic matter in the soil (%)</p></dd>


<dt id="arg-a-clay-mi">A_CLAY_MI<a class="anchor" aria-label="anchor" href="#arg-a-clay-mi"></a></dt>
<dd><p>(numeric) The clay content of the soil (%)</p></dd>


<dt id="arg-a-sand-mi">A_SAND_MI<a class="anchor" aria-label="anchor" href="#arg-a-sand-mi"></a></dt>
<dd><p>(numeric) The sand content of the soil (%)</p></dd>


<dt id="arg-a-silt-mi">A_SILT_MI<a class="anchor" aria-label="anchor" href="#arg-a-silt-mi"></a></dt>
<dd><p>(numeric) The silt content of the soil (%)</p></dd>


<dt id="arg-a-fe-ox">A_FE_OX<a class="anchor" aria-label="anchor" href="#arg-a-fe-ox"></a></dt>
<dd><p>(numeric) The aluminium content of soil (mmol / kg)</p></dd>


<dt id="arg-a-al-ox">A_AL_OX<a class="anchor" aria-label="anchor" href="#arg-a-al-ox"></a></dt>
<dd><p>(numeric) The iron content of soil (mmol / kg)</p></dd>


<dt id="arg-a-ph-cc">A_PH_CC<a class="anchor" aria-label="anchor" href="#arg-a-ph-cc"></a></dt>
<dd><p>(numeric) The acidity of the soil, measured in 0.01M CaCl2 (-)</p></dd>


<dt id="arg-a-n-rt">A_N_RT<a class="anchor" aria-label="anchor" href="#arg-a-n-rt"></a></dt>
<dd><p>(numeric) The organic nitrogen content of the soil in mg N / kg</p></dd>


<dt id="arg-a-cn-fr">A_CN_FR<a class="anchor" aria-label="anchor" href="#arg-a-cn-fr"></a></dt>
<dd><p>(numeric) The carbon to nitrogen ratio (-)</p></dd>


<dt id="arg-a-s-rt">A_S_RT<a class="anchor" aria-label="anchor" href="#arg-a-s-rt"></a></dt>
<dd><p>(numeric) The total Sulfur content of the soil (in mg S per kg)</p></dd>


<dt id="arg-a-n-pmn">A_N_PMN<a class="anchor" aria-label="anchor" href="#arg-a-n-pmn"></a></dt>
<dd><p>(numeric) The potentially mineralizable N pool (mg N / kg soil)</p></dd>


<dt id="arg-a-p-al">A_P_AL<a class="anchor" aria-label="anchor" href="#arg-a-p-al"></a></dt>
<dd><p>(numeric) The P-AL content of the soil</p></dd>


<dt id="arg-a-p-cc">A_P_CC<a class="anchor" aria-label="anchor" href="#arg-a-p-cc"></a></dt>
<dd><p>(numeric) The plant available P content, extracted with 0.01M CaCl2 (mg / kg)</p></dd>


<dt id="arg-a-p-wa">A_P_WA<a class="anchor" aria-label="anchor" href="#arg-a-p-wa"></a></dt>
<dd><p>(numeric) The P-content of the soil extracted with water (mg P2O5 / 100 ml soil)</p></dd>


<dt id="arg-a-p-sg">A_P_SG<a class="anchor" aria-label="anchor" href="#arg-a-p-sg"></a></dt>
<dd><p>(numeric) The P-saturation index (%)</p></dd>


<dt id="arg-a-cec-co">A_CEC_CO<a class="anchor" aria-label="anchor" href="#arg-a-cec-co"></a></dt>
<dd><p>(numeric) The cation exchange capacity of the soil (mmol+ / kg), analyzed via Cobalt-hexamine extraction</p></dd>


<dt id="arg-a-ca-co-po">A_CA_CO_PO<a class="anchor" aria-label="anchor" href="#arg-a-ca-co-po"></a></dt>
<dd><p>(numeric) The The occupation of the CEC with Ca (%)</p></dd>


<dt id="arg-a-mg-co-po">A_MG_CO_PO<a class="anchor" aria-label="anchor" href="#arg-a-mg-co-po"></a></dt>
<dd><p>(numeric) The The occupation of the CEC with Mg (%)</p></dd>


<dt id="arg-a-k-co-po">A_K_CO_PO<a class="anchor" aria-label="anchor" href="#arg-a-k-co-po"></a></dt>
<dd><p>(numeric) The occupation of the CEC with K (%)</p></dd>


<dt id="arg-a-k-cc">A_K_CC<a class="anchor" aria-label="anchor" href="#arg-a-k-cc"></a></dt>
<dd><p>(numeric) The plant available K content, extracted with 0.01M CaCl2 (mg / kg)</p></dd>


<dt id="arg-a-mg-cc">A_MG_CC<a class="anchor" aria-label="anchor" href="#arg-a-mg-cc"></a></dt>
<dd><p>(numeric) The plant available Mg content, extracted with 0.01M CaCl2 (ug / kg)</p></dd>


<dt id="arg-a-mn-cc">A_MN_CC<a class="anchor" aria-label="anchor" href="#arg-a-mn-cc"></a></dt>
<dd><p>(numeric) The plant available Mn content, extracted with 0.01M CaCl2 (ug / kg)</p></dd>


<dt id="arg-a-zn-cc">A_ZN_CC<a class="anchor" aria-label="anchor" href="#arg-a-zn-cc"></a></dt>
<dd><p>(numeric) The plant available Zn content, extracted with 0.01M CaCl2 (ug / kg)</p></dd>


<dt id="arg-a-cu-cc">A_CU_CC<a class="anchor" aria-label="anchor" href="#arg-a-cu-cc"></a></dt>
<dd><p>(numeric) The plant available Cu content, extracted with 0.01M CaCl2 (ug / kg)</p></dd>


<dt id="arg-d-sa-w">D_SA_W<a class="anchor" aria-label="anchor" href="#arg-d-sa-w"></a></dt>
<dd><p>(numeric) The wet perimeter index of the field, fraction that field is surrounded by water</p></dd>


<dt id="arg-d-ro-r">D_RO_R<a class="anchor" aria-label="anchor" href="#arg-d-ro-r"></a></dt>
<dd><p>(numeric) The risk that surface water runs off the parcel</p></dd>


<dt id="arg-m-compost">M_COMPOST<a class="anchor" aria-label="anchor" href="#arg-m-compost"></a></dt>
<dd><p>(numeric) The frequency that compost is applied (optional, every x years)</p></dd>


<dt id="arg-m-green">M_GREEN<a class="anchor" aria-label="anchor" href="#arg-m-green"></a></dt>
<dd><p>(boolean) A soil measure. Are catch crops sown after main crop (optional, option: yes or no)</p></dd>


<dt id="arg-a-density-sa">A_DENSITY_SA<a class="anchor" aria-label="anchor" href="#arg-a-density-sa"></a></dt>
<dd><p>(numeric) The bulk density of the soil (kg/m3)</p></dd>


<dt id="arg-b-lsw-id">B_LSW_ID<a class="anchor" aria-label="anchor" href="#arg-b-lsw-id"></a></dt>
<dd><p>(character) An unique identifier for each Local Surface Water per field</p></dd>


<dt id="arg-lsw">LSW<a class="anchor" aria-label="anchor" href="#arg-lsw"></a></dt>
<dd><p>(data.table) The averaged soil properties (mean and sd) per Local Surface Water. Can be derived from bbwp_lsw_properties.</p></dd>


<dt id="arg-i-clim-rothc">i_clim_rothc<a class="anchor" aria-label="anchor" href="#arg-i-clim-rothc"></a></dt>
<dd><p>(numeric) the soil indicator for carbon saturation derived via rothc.</p></dd>


<dt id="arg-a-som-loi-mlmax">A_SOM_LOI_MLMAX<a class="anchor" aria-label="anchor" href="#arg-a-som-loi-mlmax"></a></dt>
<dd><p>(numeric) The max. percentage organc matter estimated via machine learning model (%)</p></dd>


<dt id="arg-foptim">foptim<a class="anchor" aria-label="anchor" href="#arg-foptim"></a></dt>
<dd><p>(list) a list with options to guide the identification of suitable crop rotation schemes</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>the foptim is a list with parameters affecting the selection of best crop rotation plans.
the parameter outputtype gives the user the possibility to select specific outcomes:
scores (gives all scores per rotation)
indicators (gives the indicator values per rotation)
bottlenecks (gives the number of bottlenecks per rotation)
rotation (gives the best rotation for BLN total, per ESD and OBI)
all (all output options)
The parameter b_lu_brp allows the user to send an user defined crop rotation using BRP codes. This will replace the default scenarios as long as the parameter scenarios is NULL.
The parameter scenarios allows the user to select only specific crop rotation scenarios from the package table `bln_scen_croprotation`</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gerard Ros, Sven Verweij, Yuki Fujita, Noud van Dam, Brent Riechelman.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

